import{S as t,i as e,s,ar as a,k as n,e as r,t as o,$ as c,d as l,n as f,c as u,a as i,g as h,b as m,f as p,a0 as d,as as $,v as g,r as k,V as v,j as b,m as w,o as j,w as x,aE as E,ac as P}from"../../chunks/vendor-dbc710f8.js";import{c as F,d as _}from"../../chunks/db-85317766.js";import{P as y}from"../../chunks/PostList-73e439a3.js";import{S as z}from"../../chunks/consts-9fb24035.js";import"../../chunks/models-64f15429.js";import"../../chunks/stores-23b8e435.js";import"../../chunks/RenderPost-8c7e4d32.js";import"../../chunks/singletons-bb9012b7.js";function S(t){let e,s,a,c,$,g,k,b,w,j=(t[3].message?t[3].message:t[3])+"";return{c(){e=r("div"),s=r("h1"),a=o("500"),c=n(),$=r("p"),g=o("Failed to fetch feed:"),k=n(),b=r("p"),w=o(j),this.h()},l(t){e=u(t,"DIV",{class:!0});var n=i(e);s=u(n,"H1",{});var r=i(s);a=h(r,"500"),r.forEach(l),c=f(n),$=u(n,"P",{});var o=i($);g=h(o,"Failed to fetch feed:"),o.forEach(l),k=f(n),b=u(n,"P",{});var m=i(b);w=h(m,j),m.forEach(l),n.forEach(l),this.h()},h(){m(e,"class","error svelte-fckzpu")},m(t,n){p(t,e,n),d(e,s),d(s,a),d(e,c),d(e,$),d($,g),d(e,k),d(e,b),d(b,w)},p:v,i:v,o:v,d(t){t&&l(e)}}}function C(t){let e,s;return e=new y({props:{start:t[0],path:"/feed",total:t[2],loadPosts:t[1]}}),{c(){b(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,a){j(e,t,a),s=!0},p(t,s){const a={};1&s&&(a.start=t[0]),e.$set(a)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){x(e,t)}}}function H(t){let e,s,a,r,o,c;return e=new E({props:{class:"skeleton"}}),a=new P({props:{style:"margin: 2rem;",withOverlay:!1}}),o=new E({props:{class:"skeleton"}}),{c(){b(e.$$.fragment),s=n(),b(a.$$.fragment),r=n(),b(o.$$.fragment)},l(t){w(e.$$.fragment,t),s=f(t),w(a.$$.fragment,t),r=f(t),w(o.$$.fragment,t)},m(t,n){j(e,t,n),p(t,s,n),j(a,t,n),p(t,r,n),j(o,t,n),c=!0},p:v,i(t){c||(g(e.$$.fragment,t),g(a.$$.fragment,t),g(o.$$.fragment,t),c=!0)},o(t){k(e.$$.fragment,t),k(a.$$.fragment,t),k(o.$$.fragment,t),c=!1},d(t){x(e,t),t&&l(s),x(a,t),t&&l(r),x(o,t)}}}function I(t){let e,s,v,b,w,j,x;document.title=e="Feed | "+z;let E={ctx:t,current:null,token:null,hasCatch:!0,pending:H,then:C,catch:S,value:2,error:3,blocks:[,,,]};return a(F(),E),{c(){s=n(),v=r("section"),b=r("h2"),w=o("Feed"),j=n(),E.block.c(),this.h()},l(t){c('[data-svelte="svelte-ehv65w"]',document.head).forEach(l),s=f(t),v=u(t,"SECTION",{class:!0});var e=i(v);b=u(e,"H2",{class:!0});var a=i(b);w=h(a,"Feed"),a.forEach(l),j=f(e),E.block.l(e),e.forEach(l),this.h()},h(){m(b,"class","svelte-fckzpu"),m(v,"class","svelte-fckzpu")},m(t,e){p(t,s,e),p(t,v,e),d(v,b),d(b,w),d(v,j),E.block.m(v,E.anchor=null),E.mount=()=>v,E.anchor=null,x=!0},p(s,[a]){t=s,(!x||0&a)&&e!==(e="Feed | "+z)&&(document.title=e),$(E,t,a)},i(t){x||(g(E.block),x=!0)},o(t){for(let e=0;e<3;e+=1){const t=E.blocks[e];k(t)}x=!1},d(t){t&&l(s),t&&l(v),E.block.d(),E.token=null,E=null}}}var N=function(t,e,s,a){return new(s||(s=Promise))((function(n,r){function o(t){try{l(a.next(t))}catch(e){r(e)}}function c(t){try{l(a.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,c)}l((a=a.apply(t,e||[])).next())}))};function O({page:t,fetch:e,session:s,context:a}){return N(this,void 0,void 0,(function*(){let e=/^(\d+)?\/?$/.exec(t.params.feed_slug||"");return e?{props:{start_page:e[1]?Number(e[1]):1}}:{status:404,error:"Page does not exist"}}))}function V(t,e,s){let{start_page:a}=e;return t.$$set=t=>{"start_page"in t&&s(0,a=t.start_page)},[a,(t,e)=>_(t,e)]}export default class extends t{constructor(t){super(),e(this,t,V,I,s,{start_page:0})}}export{O as load};
